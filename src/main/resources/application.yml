server:
  port: 8080

spring:
  datasource:
    url: jdbc:h2:file:./data/metadata;MODE=MYSQL;DATABASE_TO_UPPER=false
    driver-class-name: org.h2.Driver
    username: sa
    password: ''
  sql:
    init:
      mode: always
  h2:
    console:
      enabled: true

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true

rag:
  chroma:
    base-url: http://localhost:8000
    collection: kb
    tenant: default_tenant
    database: default_database
  ollama:
    base-url: http://localhost:11434
    model-name: llama3.1
  retrieval:
    top-k: 5
    min-score: 0.2
    candidate-size: 20
    hybrid:
      enabled: true
      full-text-top-k: 20
    rerank:
      keyword-enabled: true
      keyword-boost: 0.1
      cross-encoder:
        enabled: false
        top-k: 10
        model-id: cross-encoder/ms-marco-MiniLM-L-6-v2
        model-path: ''
        include-token-types: true
        sigmoid: false
  fulltext:
    enabled: true
    index-path: data/fulltext
    rebuild-on-ingest: true
    cache-max-entries: 1024
    cache-max-ram-mb: 64
  cache:
    enabled: true
    embedding:
      max-size: 1000
      ttl: 30m
    result:
      max-size: 500
      ttl: 10m
  concurrency:
    enabled: true
    core-size: 4
    max-size: 8
    queue-capacity: 64
    name: rag-ask
  ingest:
    pdf-dir: samples/pdf
    md-dir: samples/md
    web-urls: samples/urls.txt
    upload-dir: data/uploads
    allowed-extensions:
      - pdf
      - md
      - markdown
      - txt
      - log
      - csv
      - docx
      - html
      - htm
    version: v1
    tags:
      - guide
      - api
    chunk-size: 800
    chunk-overlap: 120
    batch-enabled: true
    batch-size: 32
